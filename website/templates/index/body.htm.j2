{%- macro card_create(card, z) -%}
<div
        class="card"
        style="
            z-index: {{ z }};
            {% if card.colour %}
                --fallback: {{ card.colour[0] }}, {{ card.colour[1] }}, {{ card.colour[2] }};
            {% else %}
                --fallback: 169, 169, 169;
            {% endif %}
            {% if card.font_colour %}
                color: rgb({{ card.font_colour[0] }}, {{ card.font_colour[1] }}, {{ card.font_colour[2] }});
            {% else %}
                color: rgb(0, 0, 0);
            {% endif %}
            width: var(--individual-card-width);
            {% if card.width %}
                --individual-card-width: calc(var(--card-width) + (var(--overlap-width) * {{ card.width - 1 }}));
                grid-column-end: span {{ card.width }};
            {% else %}
                --individual-card-width: calc(var(--card-width) + (var(--overlap-width) * 0));
                grid-column-end: span 1;
            {% endif %}
">
    <div class="background" style="background: rgb(var(--fallback));">
        {% if card.emoji %}
            {%- for i in range(13) -%}
                <p>{{ card.emoji * 17 }}</p>
            {%- endfor -%}
        {% endif %}
    </div>
    <div class="background" style="background: rgba(var(--fallback), 0.6);"></div>
    <div class="content">
        {% if card.image %}
            <img src="{{ card.image }}" />
        {% endif %}
        <h2>{{ card.name }}</h2>
        <p class="guild-count" data-bot-name="{{ card.name }}" style="display: none"></p>
        {%- if card.description -%}
            <p>{{ card.description }}</p>
        {%- endif -%}
        <ul>
            {%- for i in card.links -%}  {# loop through the list of items to list #}
                {% set icon_name = i.link.split('.')[1] %}  {# this code gets the middle part of a link, example: www.github.com -> github #}
                {%- if icon_name in ["github", "twitter", "discord"] -%}  {# is it known link icon #}
                    <li><a href="{{ i.link }}"><i class="icon-{{ icon_name }}"></i> {{ i.name }}</a></li>
                {%- elif i.link.startswith("mailto") -%}
                    <li><a href="{{ i.link }}"><i class="icon-at"></i> {{ i.name }}</a></li>  {# mail icon #}
                {%- else -%}
                    <li><a href="{{ i.link }}"><i class="icon-link"></i> {{ i.name }}</a></li>  {# generic link icon #}
                {%- endif -%}
            {%- endfor -%}
        </ul>
    </div>
</div>
{%- endmacro -%}

 
{% block body %}
<h1>Voxel Fox</h1>
<div id="cards">
    {% if include_back_button %}
        {{- card_create({
            "colour": [0, 0, 0],
            "font_colour": [255, 255, 255],
            "width": 1,
            "emoji": "",
            "links": [
                {
                    "name": "Back",
                    "link": "/"
                }
            ]}, 100)
        }}
    {% endif %}
    {%- for i in data.card -%}
        {{- card_create(i, 100 - loop.index - 1) -}}
    {%- endfor -%}
</div>

<script type="text/javascript">
    fetchBotCount();
</script>

<!-- Here's a cat. Her name is Oreo. Be nice to oreo :)-->
<!--========/\_____/\-->
<!--=======/..o...o..\-->
<!--======(.....^.....)-->
<!--=======).........(-->
<!--======(...........)-->
<!--=====(.(..)...(..).)-->
<!--====(__(__)___(__)__)-->
{% endblock body %}
