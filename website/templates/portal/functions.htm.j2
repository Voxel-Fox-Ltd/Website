{% macro display_item(item, purchase=none, show_buy_button=true, disabled=false) %}
<div class="item{% if disabled %} disabled{% endif %}" data-id="{{ item.id }}" data-order="{{ item.order }}">
  <p class="name">{{ item.name }}{% if purchase and purchase.discord_guild_id %}({{ purchase.discord_guild_id }}){% endif %}</p>
  {% if item.description %}
    <div class="description">{{ item.description | markdown | safe }}</div>
  {% endif %}
  <p class="price">
    Price: <span>{{ item.currency_symbol }}{{ item.price }}</span>
  </p>
  {% if show_buy_button and not disabled %}
    {% if item.per_guild %}
      <select class="guild-select" onchange="javascript:guildSelectChange('{{ item.id }}')">
        <option value="">{% if item.subscription %}Subscribe{% else %}Purchase{% endif %} for Guild</option>
      </select>
    {% else %}
      {% if purchase and item.subscription %}
        <form>
          <button formaction="/portal/unsubscribe/{{ purchase.id }}" class="button unsubscribe">Unsubscribe</button>
        </form>
      {% elif item.subscription %}
        <form>
          <button formaction="/portal/item/{{ item.id }}" class="button">{% if item.subscription %}Subscribe{% else %}Purchase{% endif %}</button>
        </form>
      {% endif %}
    {% endif %}
  {% endif %}
</div>
{% endmacro %}
